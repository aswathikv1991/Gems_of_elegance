<%- include("../../views/partials/user/header") %>
<meta http-equiv="Cache-Control" content="no-store, no-cache, must-revalidate, max-age=0">
<meta http-equiv="Pragma" content="no-cache">
<meta http-equiv="Expires" content="0">

    <title>Order Successful</title>
    <link rel="stylesheet" href="/css/ordersuccess.css"> <!-- Link to external stylesheet -->
   

    <div class="main-content">
    <div class="success-container">
        <div class="success-icon">‚úÖ</div>
        <div class="success-message">Thank you for your purchase!</div>
        <div class="order-details">
            Your order <strong>#<%= order.orderID%></strong> has been placed successfully.<br>
            Payment Method: <strong><%= order.paymentMethod.toUpperCase() %></strong><br>
            Total Amount: <strong>‚Çπ<%=order.totalAmount %></strong>
        </div>
      
        <a href="/order/<%= order._id %>" class="btn btn-primary">üì¶ View Order Details</a>

        <a href="/products " class="btn btn-secondary">üõçÔ∏è Continue Shopping</a>
    </div>
</div>
<script>
   
   // Remove the checkout page from history
   window.onload = function () {
    history.replaceState(null, null, document.URL);
    setTimeout(function () {
        window.onpopstate = function () {
            window.location.href = "/orders"; // Redirect to orders page
        };
    }, 0);
};



// Push an initial state to history
// Store a state in history to detect back navigation
//window.history.pushState({ page: "ordersuccess" }, "", window.location.href);

// Listen for back navigation
/*window.addEventListener("popstate", function (event) {
    location.reload();
    alert("Reload detected!");

    console.log("Event state:", event.state); // Corrected console.log()

   /* if (event.state && event.state.page === "ordersuccess") {
        alert("Redirecting to home...");
        window.location.href = "/"; // Redirect user to home page
    } else {
        // Re-push state to prevent going back
        window.history.pushState({ page: "ordersuccess" }, "", window.location.href);
    }
});*/


</script>
    <%- include("../../views/partials/user/footer") %>

